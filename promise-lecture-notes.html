<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promises Lecture</title>
</head>
<body>
<main>
    <h1>Intro to JavaScript Promises</h1>

    <h3>Articles relevant to the local weather conditions...</h3>
    <div id="articles"></div>

</main>
<script src="js/keys.js"></script>
<script
        src="https://code.jquery.com/jquery-3.4.0.min.js"
        integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg="
        crossorigin="anonymous"></script>
<script src="js/promises.js"></script>
<script>

    "use strict";

    // ====================================================================================
    // ==================================== PROMISES ======================================
    // ====================================================================================

    // // Working with promises looks a lot like using AJAX in jQuery
    //
    // // jQuery AJAX methods
    // $.ajax('https://swapi.dev/api/people/1')
    //     .done(function(data) {
    //         console.log(data);
    //     })
    //     .fail(function(jqXHR, message) {
    //         console.log(message);
    //     });
    //
    // // Using promise methods (jQuery version 3.x.x and after)
    // $.ajax('https://swapi.dev/api/people/1')
    //     .then(function(data) {
    //         console.log(data);
    //     })
    //     .catch(function(jqXHR, message) {
    //         console.log(message);
    //     });



    // ============ Basic Example of Promise Creation and Handling

    // let goodKid = true;
    //
    // // Defining a promise
    // const getCake = new Promise((resolve, reject) => {
    //     // setTimeout(() => {
    //         if (goodKid) {
    //             resolve("Here is some cake");
    //         } else {
    //             reject("Bad. No cake. :(");
    //         }
    //     // }, 3000);
    // });
    //
    // console.log(getCake); // promise object
    //
    // // Handling a promise (defining what will happen when either resolved or rejected)
    // getCake.then((data) => {
    //     console.log(data);
    // }).catch((err) => {
    //     console.log(err);
    // });


    // -------- MINI EXERCISE 1

    // TODO: Complete the `handling-promises.html` todos



    // ====================================== FETCH API


    // ============ Fetch API

    // jQuery AJAX request example
    // $.ajax('https://swapi.dev/api/people/1')
    //     .done(function(data) {
    //         console.log(data);
    //     })
    //     .fail(function(jqXHR, message) {
    //         console.log(message);
    //     });

    // Fetch API Version...


    // -------- MINI EXERCISE 2

    /* TODO: make a GET request using fetch to the url below to get an array of five cat fact objects.
        Log the text property of the first cat fact object. Be sure to log possible errors in a catch.
     */

    // const catUrl = `https://cat-fact.herokuapp.com/facts/random?animal_type=cat&amount=5`;

    // Fetch API POST example

    // fetch('https://hookb.in/eKZ0mV6k1aTr9g86Q7JM', {
    //     method: 'POST',
    //     headers: {
    //         'Content-Type': 'application/json'
    //     },
    //     body: JSON.stringify({
    //         username: "bill",
    //         password: "pass123"
    //     })
    // })
    //     .then(console.log)
    //     .catch(console.log);


    // -------- MINI EXERCISE 3

    /* TODO: Create a new endpoint on https://hookbin.com/ and use fetch to send some POST requests.
        Experiment with sending different shapes of data in the body of the request.
     */
 // fetch('https://hookbin.com/jepgKNgYp7c9dlMMdgq8', {
 //     method: 'POST',
 //     headers: {
 //         'Content-Type': 'application/json'
 //     },
 //     body: JSON.stringify({
 //       username: "charlie",
 //         password: "Cic8taBoi@1"
 //     })
 // })
 //    .then(console.log)
 //    .catch(console.log)
 //






    // ====================================== ADDITIONAL TOPICS

    // ============ Promise Chaining

    // fetch('https://swapi.dev/api/people/1')
    //     .then(res => res.json())
    //     .then(({ homeworld }) => fetch(homeworld))
    //     .then(res => res.json())
    //     .then(({ name }) => console.log(name))
    //     .catch(console.error);


    // ============ Promise.all()

    // // Getting a coffee is a great example of how two interdependent asynchronous actions can be handled with promises.
    //
    // const getCoffee = (type) => {
    //
    //     const orderAndPay = new Promise((resolve, reject) => {
    //         setTimeout(function() {
    //             resolve(`Coffee of type ${type} has been ordered and paid for!`);
    //         }, 2000);
    //     });
    //
    //     const makeOrder = new Promise((resolve, reject) => {
    //         setTimeout(function() {
    //             resolve(`Coffee of type ${type} is ready!`);
    //         }, 4000);
    //     });
    //
    //     return Promise.all([orderAndPay, makeOrder]);
    //
    // };
    //
    // getCoffee("espresso").then((data) => {
    //     console.log(data[0]);
    //     console.log(data[1]);
    //     console.log("You now have a coffee!");
    // }).catch((err) => {
    //     console.log(err)
    // });
    //


    // ============ Promise.race()
    //
    // const color1Promise = new Promise((res) => {
    //     setTimeout(res, 2000, fetch('./data/color.json'));
    // });
    //
    // const color2Promise = new Promise((res) => {
    //     setTimeout(res, 1000, fetch('./data/color2.json'));
    // });
    //
    // const getColor = () => Promise.race([color1Promise, color2Promise]);
    //
    // getColor().then(response => response.json()).then(data => console.log(data));
    //




    // project
 //RESTful API Requests
/*    route	method	description
    /posts	GET	Fetch a (paginated) list of all of the posts
    /posts	POST	Create a new post
    /posts/{id}	GET	View the information about a specific post
    /posts/{id}	PUT or PATCH	Modify the existing post
    /posts/{id}	DELETE	Delete a post
       Domaine

</script>

</body>
</html>